(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a8879798"],{2157:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"add-btn"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新增")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"序号",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s((e.page-1)*e.pageSize+t.$index+1)+" ")]}}])}),a("el-table-column",{attrs:{label:"机器人名称",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name||"--")+" ")]}}])}),a("el-table-column",{attrs:{label:"AppKey",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.appKey))])]}}])}),a("el-table-column",{attrs:{label:"推送地址",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"header",fn:function(t){return[a("div",{staticClass:"row-flex"},[e._v(" 推送地址 "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"POST 请求，参数与钉钉推送来的格式一致",placement:"top-end"}},[a("i",{staticClass:"el-icon-question help-icon"})])],1)]}},{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.apiUrl))])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"danger-text",attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteRobot(t.row)}}},[e._v("删除")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.editRobot(t.row)}}},[e._v("编辑")])]}}])})],1),a("Pagination",{attrs:{page:e.page,pageSize:e.pageSize,total:e.total},on:{pageChange:e.pageChange,pageSizeChange:e.pageSizeChange}}),a("el-dialog",{attrs:{title:(e.robotForm.robotId?"编辑":"新增")+"机器人",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.handleClosed}},[a("el-form",{ref:"robotFormRef",staticClass:"at-form",attrs:{model:e.robotForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"机器人名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入机器人名称",maxlength:"100"},model:{value:e.robotForm.name,callback:function(t){e.$set(e.robotForm,"name",t)},expression:"robotForm.name"}})],1),a("el-form-item",{attrs:{label:"AppKey",prop:"appKey"}},[a("el-input",{attrs:{placeholder:"请输入 AppKey",maxlength:"200"},model:{value:e.robotForm.appKey,callback:function(t){e.$set(e.robotForm,"appKey",t)},expression:"robotForm.appKey"}})],1),a("el-form-item",{attrs:{label:"AppSecret",prop:"appSecret"}},[a("el-input",{attrs:{placeholder:"请输入 AppSecret",maxlength:"100"},model:{value:e.robotForm.appSecret,callback:function(t){e.$set(e.robotForm,"appSecret",t)},expression:"robotForm.appSecret"}})],1),a("el-form-item",{attrs:{label:"推送地址",prop:"apiUrl"}},[a("div",{staticClass:"row-flex"},[a("el-input",{attrs:{placeholder:"验证消息来自钉钉后推送数据到该地址",maxlength:"512"},model:{value:e.robotForm.apiUrl,callback:function(t){e.$set(e.robotForm,"apiUrl",t)},expression:"robotForm.apiUrl"}}),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"POST 请求，参数与钉钉推送来的格式一致",placement:"top-end"}},[a("i",{staticClass:"el-icon-question help-icon"})])],1)]),a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入备注",maxlength:"512"},model:{value:e.robotForm.note,callback:function(t){e.$set(e.robotForm,"note",t)},expression:"robotForm.note"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.createLoading},on:{click:e.submitRobotForm}},[e._v("确 定")])],1)],1)],1)},r=[],n=a("5530"),i=(a("d3b7"),a("333d")),l=a("b775");function s(e){return Object(l["a"])({url:"/robot/createRobot",method:"post",data:e})}function c(e){return Object(l["a"])({url:"/robot/updateRobot",method:"post",data:e})}function p(e){return Object(l["a"])({url:"/robot/deleteRobot",method:"post",data:e})}function u(e){return Object(l["a"])({url:"/robot/getRobots",method:"get",params:e})}var f={data:function(){return{listLoading:!0,list:[],page:1,pageSize:20,total:0,dialogVisible:!1,createLoading:!1,robotForm:{name:"",appKey:"",appSecret:"",apiUrl:"",note:""},rules:{name:[{required:!0,message:"请输入机器人名称",trigger:"blur"}],appKey:[{required:!0,message:"请输入 AppKey",trigger:"blur"}],appSecret:[{required:!0,message:"请输入 AppSecret",trigger:"blur"}],apiUrl:[{required:!0,message:"请输入 AppSecret",trigger:"blur"}]}}},watch:{dialogVisible:function(e,t){!e&&this.$refs.robotFormRef&&this.$refs.robotFormRef.resetFields()}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.listLoading=!0;var a=Object(n["a"])({page:this.page,pageSize:this.pageSize},t);u(a).then((function(t){var a=t.data,o=a.rows,r=a.page,n=a.pageSize,i=a.total;e.list=o,e.page=r,e.pageSize=n,e.total=i})).finally((function(){e.listLoading=!1}))},pageChange:function(e){this.page=e,this.fetchData()},pageSizeChange:function(e){this.pageSize=e,this.fetchData()},submitRobotForm:function(){var e=this;this.$refs.robotFormRef.validate().then((function(){e.createLoading=!0,e.robotForm.robotId?c(e.robotForm).then((function(t){e.fetchData(),e.$message.success({message:"保存成功!"}),e.dialogVisible=!1})).finally((function(){e.createLoading=!1})):s(e.robotForm).then((function(t){e.fetchData(),e.$message.success({message:"保存成功!"}),e.dialogVisible=!1})).finally((function(){e.createLoading=!1}))}))},deleteRobot:function(e){var t=this;this.$confirm("此操作将删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){p({robotId:e.robotId}).then((function(){t.fetchData(),t.$message.success({message:"删除成功!"})}))}))},editRobot:function(e){this.robotForm=Object(n["a"])({},e),this.dialogVisible=!0},handleClosed:function(){this.robotForm={name:"",appKey:"",appSecret:"",apiUrl:"",note:""}}},components:{Pagination:i["a"]}},g=f,d=(a("2421"),a("2877")),b=Object(d["a"])(g,o,r,!1,null,"82be94dc",null);t["default"]=b.exports},2421:function(e,t,a){"use strict";a("5679")},"333d":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-pagination",{staticClass:"at-pagination",attrs:{background:"","current-page":e.page,"page-sizes":[20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.pageSizeChange,"current-change":e.pageChange}})},r=[],n=(a("a9e3"),{name:"Pagination",props:{page:Number,pageSize:Number,total:Number},methods:{pageChange:function(e){this.$emit("pageChange",e)},pageSizeChange:function(e){this.$emit("pageSizeChange",e)}}}),i=n,l=(a("3dbf"),a("2877")),s=Object(l["a"])(i,o,r,!1,null,"d6f0d324",null);t["a"]=s.exports},"3dbf":function(e,t,a){"use strict";a("736a")},5679:function(e,t,a){},"736a":function(e,t,a){},a9e3:function(e,t,a){"use strict";var o=a("83ab"),r=a("da84"),n=a("94ca"),i=a("6eeb"),l=a("5135"),s=a("c6b6"),c=a("7156"),p=a("c04e"),u=a("d039"),f=a("7c73"),g=a("241c").f,d=a("06cf").f,b=a("9bf2").f,m=a("58a8").trim,h="Number",v=r[h],S=v.prototype,F=s(f(S))==h,y=function(e){var t,a,o,r,n,i,l,s,c=p(e,!1);if("string"==typeof c&&c.length>2)if(c=m(c),t=c.charCodeAt(0),43===t||45===t){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:o=2,r=49;break;case 79:case 111:o=8,r=55;break;default:return+c}for(n=c.slice(2),i=n.length,l=0;l<i;l++)if(s=n.charCodeAt(l),s<48||s>r)return NaN;return parseInt(n,o)}return+c};if(n(h,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var _,C=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof C&&(F?u((function(){S.valueOf.call(a)})):s(a)!=h)?c(new v(y(t)),a,C):y(t)},w=o?g(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;w.length>x;x++)l(v,_=w[x])&&!l(C,_)&&b(C,_,d(v,_));C.prototype=S,S.constructor=C,i(r,h,C)}}}]);